<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Network Graph</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #e94560, #f6e05e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(45deg, #e94560, #f6e05e);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin: 0 10px;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        #graph {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .node {
            cursor: pointer;
            stroke: #fff;
            stroke-width: 2px;
        }

        .link {
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 1px;
        }

        .node-label {
            font-size: 12px;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 8px;
            pointer-events: none;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 200px;
        }

        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .stats {
            text-align: center;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Movie Network Graph</h1>
            <p>Interactive visualization of movie relationships</p>
        </div>

        <div class="controls">
            <button class="btn" onclick="restartSimulation()">üîÑ Restart</button>
            <button class="btn" onclick="centerGraph()">üéØ Center</button>
            <button class="btn" onclick="toggleLabels()">üè∑Ô∏è Toggle Labels</button>
        </div>

        <div style="position: relative;">
            <svg id="graph"></svg>
            <div class="legend">
                <h4 style="margin-top: 0;">Depth Levels</h4>
                <div class="legend-item">
                    <div class="legend-color" style="background: #e94560;"></div>
                    <span>Starting Movie</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f6e05e;"></div>
                    <span>1st Degree</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #10b981;"></div>
                    <span>2nd Degree</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3b82f6;"></div>
                    <span>3rd Degree</span>
                </div>
            </div>
        </div>

        <div class="stats">
            <strong>Network Stats:</strong> 
            <span id="node-count">21</span> movies, 
            <span id="link-count">71</span> connections
        </div>
    </div>

    <div class="tooltip" id="tooltip" style="display: none;"></div>

    <script>
        const graphData = {
  "nodes": [
    {
      "id": 0,
      "name": "Inception (2010)",
      "title": "Inception",
      "year": 2010,
      "depth": 0,
      "group": 1,
      "traktId": 16662
    },
    {
      "id": 1,
      "name": "The Matrix (1999)",
      "title": "The Matrix",
      "year": 1999,
      "depth": 1,
      "group": 2,
      "traktId": 481
    },
    {
      "id": 2,
      "name": "Blade Runner (1982)",
      "title": "Blade Runner",
      "year": 1982,
      "depth": 2,
      "group": 3,
      "traktId": 48
    },
    {
      "id": 3,
      "name": "Total Recall (1990)",
      "title": "Total Recall",
      "year": 1990,
      "depth": 2,
      "group": 3,
      "traktId": 704
    },
    {
      "id": 4,
      "name": "The Thirteenth Floor (1999)",
      "title": "The Thirteenth Floor",
      "year": 1999,
      "depth": 2,
      "group": 3,
      "traktId": 842
    },
    {
      "id": 5,
      "name": "Dark City (1998)",
      "title": "Dark City",
      "year": 1998,
      "depth": 2,
      "group": 3,
      "traktId": 1797
    },
    {
      "id": 6,
      "name": "Interstellar (2014)",
      "title": "Interstellar",
      "year": 2014,
      "depth": 1,
      "group": 2,
      "traktId": 102156
    },
    {
      "id": 7,
      "name": "The Martian (2015)",
      "title": "The Martian",
      "year": 2015,
      "depth": 2,
      "group": 3,
      "traktId": 183371
    },
    {
      "id": 8,
      "name": "Gravity (2013)",
      "title": "Gravity",
      "year": 2013,
      "depth": 2,
      "group": 3,
      "traktId": 34093
    },
    {
      "id": 9,
      "name": "Arrival (2016)",
      "title": "Arrival",
      "year": 2016,
      "depth": 2,
      "group": 3,
      "traktId": 210803
    },
    {
      "id": 10,
      "name": "2001: A Space Odyssey (1968)",
      "title": "2001: A Space Odyssey",
      "year": 1968,
      "depth": 2,
      "group": 3,
      "traktId": 33
    },
    {
      "id": 11,
      "name": "Memento (2000)",
      "title": "Memento",
      "year": 2000,
      "depth": 1,
      "group": 2,
      "traktId": 47
    },
    {
      "id": 12,
      "name": "The Machinist (2004)",
      "title": "The Machinist",
      "year": 2004,
      "depth": 2,
      "group": 3,
      "traktId": 2679
    },
    {
      "id": 13,
      "name": "Shutter Island (2010)",
      "title": "Shutter Island",
      "year": 2010,
      "depth": 2,
      "group": 3,
      "traktId": 6422
    },
    {
      "id": 14,
      "name": "Fight Club (1999)",
      "title": "Fight Club",
      "year": 1999,
      "depth": 2,
      "group": 3,
      "traktId": 432
    },
    {
      "id": 15,
      "name": "Mulholland Drive (2001)",
      "title": "Mulholland Drive",
      "year": 2001,
      "depth": 2,
      "group": 3,
      "traktId": 827
    },
    {
      "id": 16,
      "name": "Source Code (2011)",
      "title": "Source Code",
      "year": 2011,
      "depth": 1,
      "group": 2,
      "traktId": 31151
    },
    {
      "id": 17,
      "name": "Looper (2012)",
      "title": "Looper",
      "year": 2012,
      "depth": 2,
      "group": 3,
      "traktId": 42897
    },
    {
      "id": 18,
      "name": "Predestination (2014)",
      "title": "Predestination",
      "year": 2014,
      "depth": 2,
      "group": 3,
      "traktId": 128287
    },
    {
      "id": 19,
      "name": "Edge of Tomorrow (2014)",
      "title": "Edge of Tomorrow",
      "year": 2014,
      "depth": 2,
      "group": 3,
      "traktId": 92230
    },
    {
      "id": 20,
      "name": "Minority Report (2002)",
      "title": "Minority Report",
      "year": 2002,
      "depth": 2,
      "group": 3,
      "traktId": 145
    }
  ],
  "links": [
    {
      "source": 0,
      "target": 1,
      "value": 1
    },
    {
      "source": 0,
      "target": 6,
      "value": 1
    },
    {
      "source": 0,
      "target": 11,
      "value": 1
    },
    {
      "source": 0,
      "target": 16,
      "value": 1
    },
    {
      "source": 0,
      "target": 13,
      "value": 1
    },
    {
      "source": 1,
      "target": 0,
      "value": 1
    },
    {
      "source": 1,
      "target": 2,
      "value": 1
    },
    {
      "source": 1,
      "target": 3,
      "value": 1
    },
    {
      "source": 1,
      "target": 4,
      "value": 1
    },
    {
      "source": 1,
      "target": 5,
      "value": 1
    },
    {
      "source": 2,
      "target": 3,
      "value": 1
    },
    {
      "source": 2,
      "target": 20,
      "value": 1
    },
    {
      "source": 3,
      "target": 2,
      "value": 1
    },
    {
      "source": 3,
      "target": 0,
      "value": 1
    },
    {
      "source": 3,
      "target": 1,
      "value": 1
    },
    {
      "source": 4,
      "target": 5,
      "value": 1
    },
    {
      "source": 4,
      "target": 1,
      "value": 1
    },
    {
      "source": 4,
      "target": 0,
      "value": 1
    },
    {
      "source": 4,
      "target": 2,
      "value": 1
    },
    {
      "source": 5,
      "target": 1,
      "value": 1
    },
    {
      "source": 5,
      "target": 0,
      "value": 1
    },
    {
      "source": 5,
      "target": 2,
      "value": 1
    },
    {
      "source": 5,
      "target": 11,
      "value": 1
    },
    {
      "source": 6,
      "target": 0,
      "value": 1
    },
    {
      "source": 6,
      "target": 7,
      "value": 1
    },
    {
      "source": 6,
      "target": 8,
      "value": 1
    },
    {
      "source": 6,
      "target": 9,
      "value": 1
    },
    {
      "source": 6,
      "target": 10,
      "value": 1
    },
    {
      "source": 7,
      "target": 6,
      "value": 1
    },
    {
      "source": 7,
      "target": 8,
      "value": 1
    },
    {
      "source": 8,
      "target": 6,
      "value": 1
    },
    {
      "source": 8,
      "target": 7,
      "value": 1
    },
    {
      "source": 9,
      "target": 6,
      "value": 1
    },
    {
      "source": 10,
      "target": 2,
      "value": 1
    },
    {
      "source": 10,
      "target": 6,
      "value": 1
    },
    {
      "source": 11,
      "target": 0,
      "value": 1
    },
    {
      "source": 11,
      "target": 12,
      "value": 1
    },
    {
      "source": 11,
      "target": 13,
      "value": 1
    },
    {
      "source": 11,
      "target": 14,
      "value": 1
    },
    {
      "source": 11,
      "target": 15,
      "value": 1
    },
    {
      "source": 12,
      "target": 11,
      "value": 1
    },
    {
      "source": 12,
      "target": 14,
      "value": 1
    },
    {
      "source": 12,
      "target": 13,
      "value": 1
    },
    {
      "source": 12,
      "target": 0,
      "value": 1
    },
    {
      "source": 13,
      "target": 0,
      "value": 1
    },
    {
      "source": 13,
      "target": 12,
      "value": 1
    },
    {
      "source": 13,
      "target": 11,
      "value": 1
    },
    {
      "source": 14,
      "target": 11,
      "value": 1
    },
    {
      "source": 14,
      "target": 12,
      "value": 1
    },
    {
      "source": 16,
      "target": 0,
      "value": 1
    },
    {
      "source": 16,
      "target": 17,
      "value": 1
    },
    {
      "source": 16,
      "target": 18,
      "value": 1
    },
    {
      "source": 16,
      "target": 19,
      "value": 1
    },
    {
      "source": 16,
      "target": 20,
      "value": 1
    },
    {
      "source": 17,
      "target": 0,
      "value": 1
    },
    {
      "source": 17,
      "target": 18,
      "value": 1
    },
    {
      "source": 17,
      "target": 16,
      "value": 1
    },
    {
      "source": 17,
      "target": 19,
      "value": 1
    },
    {
      "source": 17,
      "target": 20,
      "value": 1
    },
    {
      "source": 18,
      "target": 17,
      "value": 1
    },
    {
      "source": 18,
      "target": 0,
      "value": 1
    },
    {
      "source": 18,
      "target": 20,
      "value": 1
    },
    {
      "source": 18,
      "target": 16,
      "value": 1
    },
    {
      "source": 19,
      "target": 16,
      "value": 1
    },
    {
      "source": 19,
      "target": 0,
      "value": 1
    },
    {
      "source": 19,
      "target": 17,
      "value": 1
    },
    {
      "source": 19,
      "target": 20,
      "value": 1
    },
    {
      "source": 20,
      "target": 2,
      "value": 1
    },
    {
      "source": 20,
      "target": 3,
      "value": 1
    },
    {
      "source": 20,
      "target": 0,
      "value": 1
    },
    {
      "source": 20,
      "target": 1,
      "value": 1
    }
  ]
};
        
        const width = 1200;
        const height = 800;
        let showLabels = true;

        const colorScale = d3.scaleOrdinal()
            .domain([1, 2, 3, 4])
            .range(['#e94560', '#f6e05e', '#10b981', '#3b82f6']);

        const svg = d3.select('#graph')
            .attr('width', width)
            .attr('height', height);

        const g = svg.append('g');

        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on('zoom', (event) => {
                g.attr('transform', event.transform);
            });

        svg.call(zoom);

        // Create simulation
        const simulation = d3.forceSimulation(graphData.nodes)
            .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(100))
            .force('charge', d3.forceManyBody().strength(-300))
            .force('center', d3.forceCenter(width / 2, height / 2))
            .force('collision', d3.forceCollide().radius(30));

        // Create links
        const link = g.append('g')
            .selectAll('line')
            .data(graphData.links)
            .enter().append('line')
            .attr('class', 'link');

        // Create nodes
        const node = g.append('g')
            .selectAll('circle')
            .data(graphData.nodes)
            .enter().append('circle')
            .attr('class', 'node')
            .attr('r', d => d.depth === 0 ? 12 : 8)
            .attr('fill', d => colorScale(d.group))
            .call(d3.drag()
                .on('start', dragstarted)
                .on('drag', dragged)
                .on('end', dragended))
            .on('mouseover', showTooltip)
            .on('mouseout', hideTooltip)
            .on('click', nodeClicked);

        // Create labels
        const labels = g.append('g')
            .selectAll('text')
            .data(graphData.nodes)
            .enter().append('text')
            .attr('class', 'node-label')
            .text(d => d.title)
            .style('font-size', d => d.depth === 0 ? '14px' : '12px')
            .style('font-weight', d => d.depth === 0 ? 'bold' : 'normal');

        // Simulation tick
        simulation.on('tick', () => {
            link
                .attr('x1', d => d.source.x)
                .attr('y1', d => d.source.y)
                .attr('x2', d => d.target.x)
                .attr('y2', d => d.target.y);

            node
                .attr('cx', d => d.x)
                .attr('cy', d => d.y);

            labels
                .attr('x', d => d.x)
                .attr('y', d => d.y + 25);
        });

        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Tooltip functions
        function showTooltip(event, d) {
            const tooltip = d3.select('#tooltip');
            tooltip.style('display', 'block')
                .style('left', (event.pageX + 10) + 'px')
                .style('top', (event.pageY - 10) + 'px')
                .html(`
                    <strong>${d.title} (${d.year})</strong><br>
                    Depth: ${d.depth}<br>
                    Trakt ID: ${d.traktId}<br>
                    Connections: ${graphData.links.filter(l => l.source.id === d.id || l.target.id === d.id).length}
                `);
        }

        function hideTooltip() {
            d3.select('#tooltip').style('display', 'none');
        }

        function nodeClicked(event, d) {
            console.log('Clicked movie:', d);
            // You could add functionality to open movie details here
        }

        // Control functions
        function restartSimulation() {
            simulation.alpha(1).restart();
        }

        function centerGraph() {
            const transform = d3.zoomIdentity.translate(width / 2, height / 2).scale(1);
            svg.transition().duration(750).call(zoom.transform, transform);
        }

        function toggleLabels() {
            showLabels = !showLabels;
            labels.style('display', showLabels ? 'block' : 'none');
        }

        // Initial center
        setTimeout(centerGraph, 1000);
    </script>
</body>
</html>